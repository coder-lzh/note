import{_ as s,b as a,a as i,aS as n}from"./chunks/framework.BMHouY9n.js";const o=JSON.parse('{"title":"11-jar包加密","description":"","frontmatter":{},"headers":[],"relativePath":"note/back-end/java-tool/11-jar包加密.md","filePath":"note/back-end/java-tool/11-jar包加密.md","lastUpdated":1729438219000}'),l={name:"note/back-end/java-tool/11-jar包加密.md"},t=n(`<h1 id="_11-jar包加密" tabindex="-1">11-jar包加密 <a class="header-anchor" href="#_11-jar包加密" aria-label="Permalink to &quot;11-jar包加密&quot;">​</a></h1><h2 id="classfinal实现" tabindex="-1">ClassFinal实现 <a class="header-anchor" href="#classfinal实现" aria-label="Permalink to &quot;ClassFinal实现&quot;">​</a></h2><blockquote><p>参考博客：<a href="https://www.cnblogs.com/aiqingbi/p/17614389.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/aiqingbi/p/17614389.html</a></p><p><a href="https://www.xxyopen.com/2023/12/06/os/jarencrypted.html" target="_blank" rel="noreferrer">https://www.xxyopen.com/2023/12/06/os/jarencrypted.html</a></p><p><a href="https://www.jb51.net/program/323518fua.htm" target="_blank" rel="noreferrer">https://www.jb51.net/program/323518fua.htm</a></p></blockquote><p>源码地址：<a href="https://gitee.com/roseboy/classfinal" target="_blank" rel="noreferrer">https://gitee.com/roseboy/classfinal</a></p><p>现成的jar包：<a href="https://wwd.lanzout.com/iKMna28t7tpg" target="_blank" rel="noreferrer">https://wwd.lanzout.com/iKMna28t7tpg</a></p><div class="tip custom-block github-alert"><p class="custom-block-title">这个工具名为 ClassFinal，可以直接加密 jar 包或 war 包，而无需修改任何项目代码。还可以设置 jar 包的启动密码，</p><p>严格控制使用人员的权限。并且支持绑定机器，使得加密后的 jar 包只能在特定机器上运行。 这就像给 jar 包加上了一把锁，只有拥有钥匙的机器和人员才能打开并运行它。 希望这个解决方案能帮助大家解决类似的烦恼，保障软件的安全与权益。</p><p>在目标jar目录下会生成一个新的jar,-encrypted.jar结尾的。</p></div><h3 id="生成机器码" tabindex="-1">生成机器码 <a class="header-anchor" href="#生成机器码" aria-label="Permalink to &quot;生成机器码&quot;">​</a></h3><p>如果我们想绑定指定机器运行，要通过如下命令去获取机器码：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> classfinal-fatjar-1.2.1.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="手动加密" tabindex="-1">手动加密 <a class="header-anchor" href="#手动加密" aria-label="Permalink to &quot;手动加密&quot;">​</a></h3><p>如果我们想直接对打包好的 jar 进行加密，可以使用如下的加密命令：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> classfinal-fatjar.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yourpaoject.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -libjars</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a.jar,b.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -packages</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.yourpackage,com.yourpackage2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -exclude</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.yourpackage.Main</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pwd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 123456</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">参数说明</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        加密的jar/war完整路径</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-packages</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    加密的包名</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">可为空,多个用</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;,&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">分割</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-libjars</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     jar/war包lib下要加密jar文件名</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">可为空,多个用</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;,&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">分割</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-cfgfiles</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    需要加密的配置文件，一般是classes目录下的yml或properties文件</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">可为空,多个用</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;,&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">分割</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-exclude</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     排除的类名</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">可为空,多个用</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;,&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">分割</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-classpath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   外部依赖的jar目录，例如/tomcat/lib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">可为空,多个用</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;,&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">分割</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         加密密码，如果是#号，则使用无密码模式加密</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-code</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        机器码，在绑定的机器生成，加密后只可在此机器上运行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-Y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           无需确认，不加此参数会提示确认以上信息</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>如果我们不想每次打包后都手动执行一次加密命令的话，可以通过 maven 插件的方式使用 ClassFinal。 这样的话，我们的 maven 项目每次打包时都会<strong>自动使用</strong> ClassFinal 加密。【正常用mvn打包就可以】</p><h3 id="maven插件自动加密" tabindex="-1">maven插件自动加密 <a class="header-anchor" href="#maven插件自动加密" aria-label="Permalink to &quot;maven插件自动加密&quot;">​</a></h3><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;net.roseboy&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;classfinal-maven-plugin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.2.1&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--设置启动 jar 包的密码，加密打包之后 pom.xml 会被删除，不用担心在 jar 包里找到此密码--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;123456&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!-- 加密的包名，如果有多个就用逗号隔开 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">packages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.example.bootdemo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">packages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!-- 加密的配置文件，如果有多个就用逗号隔开 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">cfgfiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;application.yml&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">cfgfiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!-- 不需要加密的包名/类名，如果有多个就用逗号隔开 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">excludes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.spring,com.example.bootdemo.Application.java&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">excludes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         &lt;!-- jar 包中 lib 目录下需要加密的 jar 依赖，如果有多个就用逗号隔开 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">libjars</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;my-common.jar&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">libjars</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!-- 机器码，在绑定的机器生成，加密后只可在此机器上运行 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;158478CA8276D5BFCCB6D&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">executions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">execution</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">phase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;package&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">phase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">goals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">goal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;classFinal&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">goal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">goals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">execution</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">executions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="启动加密包" tabindex="-1">启动加密包 <a class="header-anchor" href="#启动加密包" aria-label="Permalink to &quot;启动加密包&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -javaagent:boot-demo-0.0.1-SNAPSHOT-encrypted.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> boot-demo-0.0.1-SNAPSHOT-encrypted.jar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,18),p=[t];function e(h,k,r,E,d,g){return i(),a("div",null,p)}const y=s(l,[["render",e]]);export{o as __pageData,y as default};
